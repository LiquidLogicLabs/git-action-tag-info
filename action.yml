name: 'Get Tag Info'
description: 'Get tag information from local and remote repositories (GitHub, Gitea, Bitbucket)'
author: 'LiquidLogicLabs'
inputs:
  tagName:
    description: 'Tag name or "latest" to get the most recent tag'
    required: true
  repository:
    description: 'Repository URL or local path. Auto-detects: URLs (http://, https://, git@) → Remote repository, Paths → Local repository. Examples: https://github.com/owner/repo, ./my-repo, /path/to/repo'
    required: false
  platform:
    description: 'Platform type (github/gitea/bitbucket) for separate input mode'
    required: false
  repoType:
    description: 'Alias for platform (github/gitea/bitbucket). If both platform and repo_type are provided, platform takes precedence.'
    required: false
  owner:
    description: 'Repository owner (for separate input mode)'
    required: false
  repo:
    description: 'Repository name (for separate input mode)'
    required: false
  baseUrl:
    description: 'Custom base URL for self-hosted instances (e.g., https://gitea.example.com)'
    required: false
  token:
    description: 'Custom Personal Access Token (works for all platforms). If not provided, automatically falls back to GITHUB_TOKEN environment variable when available (e.g., in GitHub Actions).'
    required: false
  skipCertificateCheck:
    description: 'Skip TLS certificate verification (useful for self-hosted instances with self-signed certificates). Default: false'
    required: false
    default: 'false'
  tagFormat:
    description: 'Format pattern(s) to filter tags. Supports single pattern (e.g., "X.X"), JSON array string (e.g., ["*.*.*", "*.*"]), or comma-separated values (e.g., "*.*.*,*.*"). Patterns are tried in order as fallbacks - if first pattern matches no tags, second pattern is tried, etc. When resolving "latest", only tags matching the first successful format pattern will be considered.'
    required: false
  tagType:
    description: 'Type of item to fetch: "tags" (git tags) or "release" (platform releases). Default: "tags"'
    required: false
    default: 'tags'
  verbose:
    description: 'Enable verbose debug logging. Also enabled when ACTIONS_STEP_DEBUG=true.'
    required: false
    default: 'false'
outputs:
  exists:
    description: 'Boolean indicating if item exists'
  name:
    description: 'Item name (tag name for tags/releases)'
  itemSha:
    description: 'Item SHA (tag SHA for tags/releases)'
  itemShaShort:
    description: 'Short item SHA (first 7 characters)'
  itemType:
    description: 'Item type (commit/tag/release)'
  commitSha:
    description: 'Commit SHA'
  commitShaShort:
    description: 'Short commit SHA (first 7 characters)'
  details:
    description: 'Item details (tag message or release body)'
  verified:
    description: 'Whether item is verified (tags only, false for releases)'
  isDraft:
    description: 'Whether release is a draft (releases only, false for tags)'
  isPrerelease:
    description: 'Whether release is a prerelease (releases only, false for tags)'
runs:
  using: 'node20'
  main: 'dist/index.js'
branding:
  icon: 'tag'
  color: 'blue'

